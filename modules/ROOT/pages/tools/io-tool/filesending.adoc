:imagesdir: 
= File Sending

When you share, you can choose to publish or send the files. Publishing means you send them out and anyone who is interested ("subscribed") will receive a copy. More information about the concept of publishing and subscribing can be found  https://docs.agrirouter.com/agrirouter-interface-documentation/latest/communication.html[here]. Yet when you send the files, you select a specific recipient. Once you have selected your preferred endpoint from the list, the Send button becomes active.

image::io-tool/sendorpublish.png[]

To send files via agrirouter you need to upload them to your _Data Storage_ (drag and drop, or click to choose). You will be shown a popup after successful upload.

image::io-tool/multifieldsupload.png[]

This is a pop up message you receive when uploading a valid data.

When sending files, you can only select those from your _Data Storage_. 

image::io-tool/sending.png[]


If all goes well, you will receive the following pop-up message in the top right corner.

image::io-tool/sentsuccess.png[]

To receive the sent file, you will then need to switch to the recipient's IO-Tool account and select the _Data Storage_ section of the main menu. You can then choose between

* Receive all
* Receive from today
* Clear feed

image::io-tool/receive.png[]

The Receive all and Receive from today-Buttons are only needed, if PushNotifications are not active.

The Clear feed button is particularly useful if you have sent a broken dataset to the IO-Tool (imagine a farming software developer sending a Zip file in a broken format so that the IO-Tool cannot load it. To avoid future errors, it's better to delete the feed). Note that this button deletes all messages from the feed in agrirouter for that specific endpoint and there's no additional popup to warn the user.

In this view, you can edit (name and type), delete, download, publish or send the received files. To organise your data storage, you can rename your files. You can also view EFDI and GPS:Info data.

== Common Errors

Here's a list of common errors when sending or publishing files. Please note that all these errors and tests come from the IO-Tool and that the agrirouter itself does not check data consistency.

* *A general upload error* occurs, when a corrupt file is uploaded:

image::io-tool/corruptstream.png[]

* In another case, a file with a valid zip structure is sent, but does not contain a TaskData.xml (this is the main file of an ISOXML DataSet). It can be successfully sent but not received (when trying to receive, no error is displayed and nothing is downloaded). Also the file format is unknown when uploading.

* It is possible, that the upload is successful, but you receive few warnings (for proprietary elements in this example).

image::io-tool/uploadwarning.png[]

* This kind of upload warning is received when uploading a data that has 2 valid ISOXMLs; one in the root folder, one in the subfolder.

image::io-tool/uploadwarning2.png[]

* Shape files are assigned to a separate category.

image::io-tool/shape.png[]


